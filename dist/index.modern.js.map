{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useRef,\n  useState\n} from 'react'\n\nexport function GridAutoResponsiveWrapper(\n  props: GridAutoResponsiveWrapperProps\n) {\n  const { maxColumnCount, minColumnCount = 1, gap = 0, children } = props\n  const wrapperRef = useRef<HTMLDivElement>(null)\n\n  const [wrapperWidth, setWrapperWidth] = useState<number>()\n  // get wrapper's child elements widths\n  const gridItemWidthInWrapper: number = (\n    Array.from(children as [])[0] as ReactElement\n  ).props.minWidth\n\n  const [currentRowCount, setCurrentRowCount] = useState<number>()\n\n  const handleWindowResize = useCallback(() => {\n    setWrapperWidth(wrapperRef.current?.offsetWidth as number)\n  }, [])\n\n  // const gridItemWidthFromRef = useCallback(() => {\n  //   return wrapperRef.current?.children[0]?.scrollWidth as number\n  // }, [])\n\n  // TODO: problem with grid item's width\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      setWrapperWidth(wrapperRef.current.clientWidth)\n    }\n  }, [wrapperRef])\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize)\n    return () => {\n      window.removeEventListener('resize', handleWindowResize)\n    }\n  }, [handleWindowResize])\n\n  useEffect(() => {\n    // here's the magic\n    if (wrapperWidth && gridItemWidthInWrapper && gap && maxColumnCount) {\n      if (\n        wrapperWidth - gap * (maxColumnCount - 1) >=\n        gridItemWidthInWrapper * maxColumnCount\n      ) {\n        setCurrentRowCount(maxColumnCount)\n      } else {\n        const autoResponsiveCols = Math.floor(\n          (wrapperWidth - gap * (maxColumnCount - 1)) / gridItemWidthInWrapper\n        )\n        if (autoResponsiveCols <= minColumnCount) {\n          setCurrentRowCount(minColumnCount)\n        } else {\n          setCurrentRowCount(autoResponsiveCols)\n        }\n      }\n    }\n  }, [wrapperWidth, gridItemWidthInWrapper])\n\n  const jsxAttributes = (({\n    maxColumnCount,\n    minColumnCount,\n    children,\n    gap,\n    ...o\n  }) => o)(props)\n\n  return (\n    <div\n      ref={wrapperRef}\n      style={{\n        display: 'grid',\n        gridTemplateColumns: `repeat(${currentRowCount}, 1fr)`,\n        gridGap: gap + 'px'\n      }}\n      {...jsxAttributes}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport function GridAutoResponsiveItem(props: GridAutoResponsiveItemProps) {\n  // add min-width value to children\n  const { children, minWidth } = props\n  const child = React.Children.only(children)\n\n  const jsxAttributes = (({ minWidth, children, ...o }) => o)(props)\n\n  const singleGridElementWithMinWidth = React.cloneElement(child, {\n    style: {\n      minWidth: minWidth + 'px',\n      width: '100%'\n    },\n    ...jsxAttributes\n  })\n\n  return singleGridElementWithMinWidth\n}\n\n/**\n * Think this as a grid div.\n */\ninterface GridAutoResponsiveWrapperProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * How many columns should be in the grid at max.\n   */\n  maxColumnCount: number\n  /**\n   * How many columns should be in the grid at min.\n   * Default: 1\n   */\n  minColumnCount?: number\n  /**\n   * Spaces between grid items. Default: 0\n   */\n  gap?: number\n  children: any\n}\n\n/**\n * Think this as a div in grid.\n */\ninterface GridAutoResponsiveItemProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  children: ReactElement\n  /**\n   * You must enter a min-width value for understand when resizing should stop.\n   */\n  minWidth: number\n}\n"],"names":["GridAutoResponsiveWrapper","props","maxColumnCount","minColumnCount","gap","children","wrapperRef","useRef","wrapperWidth","setWrapperWidth","useState","gridItemWidthInWrapper","Array","from","minWidth","currentRowCount","setCurrentRowCount","handleWindowResize","useCallback","current","offsetWidth","useEffect","clientWidth","window","addEventListener","removeEventListener","autoResponsiveCols","Math","floor","jsxAttributes","o","React","ref","style","display","gridTemplateColumns","gridGap","GridAutoResponsiveItem","child","Children","only","singleGridElementWithMinWidth","cloneElement","width"],"mappings":";;SAQgBA,0BACdC;EAEA,MAAM;IAAEC,cAAF;IAAkBC,cAAc,GAAG,CAAnC;IAAsCC,GAAG,GAAG,CAA5C;IAA+CC;MAAaJ,KAAlE;EACA,MAAMK,UAAU,GAAGC,MAAM,CAAiB,IAAjB,CAAzB;EAEA,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCC,QAAQ,EAAhD;EAEA,MAAMC,sBAAsB,GAC1BC,KAAK,CAACC,IAAN,CAAWR,QAAX,EAA2B,CAA3B,EACAJ,KADA,CACMa,QAFR;EAIA,MAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCN,QAAQ,EAAtD;EAEA,MAAMO,kBAAkB,GAAGC,WAAW,CAAC;;;IACrCT,eAAe,wBAACH,UAAU,CAACa,OAAZ,wDAAC,oBAAoBC,WAArB,CAAf;GADoC,EAEnC,EAFmC,CAAtC;EAUAC,SAAS,CAAC;IACR,IAAIf,UAAU,CAACa,OAAf,EAAwB;MACtBV,eAAe,CAACH,UAAU,CAACa,OAAX,CAAmBG,WAApB,CAAf;;GAFK,EAIN,CAAChB,UAAD,CAJM,CAAT;EAMAe,SAAS,CAAC;IACRE,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCP,kBAAlC;IACA,OAAO;MACLM,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCR,kBAArC;KADF;GAFO,EAKN,CAACA,kBAAD,CALM,CAAT;EAOAI,SAAS,CAAC;IAER,IAAIb,YAAY,IAAIG,sBAAhB,IAA0CP,GAA1C,IAAiDF,cAArD,EAAqE;MACnE,IACEM,YAAY,GAAGJ,GAAG,IAAIF,cAAc,GAAG,CAArB,CAAlB,IACAS,sBAAsB,GAAGT,cAF3B,EAGE;QACAc,kBAAkB,CAACd,cAAD,CAAlB;OAJF,MAKO;QACL,MAAMwB,kBAAkB,GAAGC,IAAI,CAACC,KAAL,CACzB,CAACpB,YAAY,GAAGJ,GAAG,IAAIF,cAAc,GAAG,CAArB,CAAnB,IAA8CS,sBADrB,CAA3B;;QAGA,IAAIe,kBAAkB,IAAIvB,cAA1B,EAA0C;UACxCa,kBAAkB,CAACb,cAAD,CAAlB;SADF,MAEO;UACLa,kBAAkB,CAACU,kBAAD,CAAlB;;;;GAfC,EAmBN,CAAClB,YAAD,EAAeG,sBAAf,CAnBM,CAAT;;EAqBA,MAAMkB,aAAa,GAAG,CAAC,CAAC;IACtB3B,cADsB;IAEtBC,cAFsB;IAGtBE,QAHsB;IAItBD,GAJsB;IAKtB,GAAG0B;GALkB,KAMjBA,CANgB,EAMb7B,KANa,CAAtB;;EAQA,OACE8B,mBAAA,MAAA;IACEC,GAAG,EAAE1B;IACL2B,KAAK,EAAE;MACLC,OAAO,EAAE,MADJ;MAELC,mBAAmB,YAAYpB,uBAF1B;MAGLqB,OAAO,EAAEhC,GAAG,GAAG;;KAEbyB,cAPN,EASGxB,QATH,CADF;AAaD;SAEegC,uBAAuBpC;EAErC,MAAM;IAAEI,QAAF;IAAYS;MAAab,KAA/B;EACA,MAAMqC,KAAK,GAAGP,KAAK,CAACQ,QAAN,CAAeC,IAAf,CAAoBnC,QAApB,CAAd;;EAEA,MAAMwB,aAAa,GAAG,CAAC,CAAC;IAAEf,QAAF;IAAYT,QAAZ;IAAsB,GAAGyB;GAA1B,KAAkCA,CAAnC,EAAsC7B,KAAtC,CAAtB;;EAEA,MAAMwC,6BAA6B,GAAGV,KAAK,CAACW,YAAN,CAAmBJ,KAAnB,EAA0B;IAC9DL,KAAK,EAAE;MACLnB,QAAQ,EAAEA,QAAQ,GAAG,IADhB;MAEL6B,KAAK,EAAE;KAHqD;IAK9D,GAAGd;GALiC,CAAtC;EAQA,OAAOY,6BAAP;AACD;;;;"}